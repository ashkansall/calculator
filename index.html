<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator using html, css and js</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    
    <div class="container">
        <form>
            <div class="display">
                <input type="text" placeholder="0" onclick="" name="displayresult" id="displayresult">
            </div>
            <div class="row">
                <input type="button" id="black1" name="C" value="C" onclick="reset ()">
                <input type="button" name="sqrt" value="&radic;" onclick="mathCalculator('sqrt')">
                <input type="button" name="dvdb" value="/" onclick="cal(dvdb.value)">
                <input type="button" name="power" value="^" onclick="mathCalculator('pow')">
            </div>
            <div class="row">
                <input type="button" name="b7" value="7" onclick="cal(b7.value)">
                <input type="button" name="b8" value="8" onclick="cal(b8.value)">
                <input type="button" name="b9" value="9" onclick="cal(b9.value)">
                <input type="button" name="multiply" value="*" onclick="cal(multiply.value)">
            </div>
            <div class="row">
                <input type="button" name="b4" value="4" onclick="cal(b4.value)">
                <input type="button" name="b5" value="5" onclick="cal(b5.value)">
                <input type="button" name="b6" value="6" onclick="cal(b6.value)">
                <input type="button" name="minus" value="-" onclick="cal(minus.value)">
            </div>
            <div class="row">
                <input type="button" name="b1" value="1" onclick="cal(b1.value)">
                <input type="button" name="b2" value="2" onclick="cal(b2.value)">
                <input type="button" name="b3" value="3" onclick="cal(b3.value)">
                <input type="button" name="plus" value="+" onclick="cal(plus.value)">
            </div>
            <div class="row">
                <input type="button" name="b0" value="0" onclick="cal(b0.value)">
                <input type="button" name="dot" value="." onclick="cal(dot.value)">
                <input type="button" id="eval1" name="equal" value="=" onclick="finalize()">
            </div>
        </form>
    </div>

    <script>
        'use strict';
        let powerinput = false;
        function cal (value){
            document.getElementById('displayresult').value += value;

            if(powerinput){
                let numbers = document.getElementById('displayresult').value.split('^');
                document.getElementById('displayresult').value = Math.pow(numbers[0], numbers[1]);
                powerinput = false;
            }
        }

        function finalize(){
            document.getElementById('displayresult').value = eval(document.getElementById('displayresult').value);
        }
        function reset (){
            document.getElementById('displayresult').value = "";
        
        }
        // function otherfunc (mathfunc){
        //     if(mathfunc == 'pow'){
        //         powerinput = true;
        //         document.getElementById('displayresult').value += '^';
        //     } else{
        //         let val = document.getElementById('displayresult').value;
        //         document.getElementById('displayresult').value = Math[mathfunc](val);
        //     }
        // }
        function mathCalculator(mathFunc) {
                if(mathFunc == 'pow') {
                    powerinput = true;
                    document.getElementById('displayresult').value += '^';
                } else {
                    let val = document.getElementById('displayresult').value;
                    document.getElementById('displayresult').value = Math[mathFunc](val);
                }
            }
        
    </script>
</body>
</html>